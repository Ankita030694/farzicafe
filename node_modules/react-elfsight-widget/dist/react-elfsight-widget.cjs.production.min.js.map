{"version":3,"file":"react-elfsight-widget.cjs.production.min.js","sources":["../src/useLoadPlatform.ts","../src/ElfsightWidget.tsx"],"sourcesContent":["import { useEffect } from 'react';\n\nconst PLATFORM_URL = 'https://static.elfsight.com/platform/platform.js';\n\nexport function useLoadPlatform(modern: boolean) {\n  useEffect(() => {\n    const isPlatformLoaded =\n      'eapps' in window ||\n      !!document.querySelector(`script[src=\"${PLATFORM_URL}\"]`);\n    if (isPlatformLoaded) {\n      return;\n    }\n    const platfromScript = document.createElement('script');\n    platfromScript.src = PLATFORM_URL;\n    platfromScript.dataset.testid = 'platform-script';\n    if (modern) {\n      platfromScript.dataset.useServiceCore = '';\n    }\n    document.body.appendChild(platfromScript);\n    // platform cannot be loaded twice on the sampe page\n    /* eslint-disable-next-line react-hooks/exhaustive-deps */\n  }, []);\n}\n","import type { HTMLAttributes } from 'react';\nimport React, { memo, useEffect } from 'react';\nimport { useLoadPlatform } from './useLoadPlatform';\n\nexport type ElfsightWidgetProps =\n  | ModernElfsightWidgetProps\n  | LegacyElfsightWidgetProps;\n\nexport interface ModernElfsightWidgetProps extends BaseElfsightWidgetProps {\n  /**\n   * @deprecated since 1.1.0, please use widgetId instead\n   * */\n  widgetID?: never;\n  widgetId: string;\n}\n\nexport interface LegacyElfsightWidgetProps extends BaseElfsightWidgetProps {\n  /**\n   * @deprecated since 1.1.0, please use widgetId instead\n   * */\n  widgetID: string;\n  widgetId?: never;\n}\n\nexport interface BaseElfsightWidgetProps\n  extends HTMLAttributes<HTMLDivElement> {\n  lazy?: boolean | NamedLazyMode;\n  modern?: boolean;\n}\n\nexport type NamedLazyMode =\n  | `default`\n  | 'first-activity'\n  | 'in-viewport'\n  | 'disabled';\n\nexport const ElfsightWidget = memo(function ElfsightWidget({\n  widgetId,\n  widgetID,\n  lazy,\n  modern = false,\n  className,\n  ...forwardedProps\n}: ElfsightWidgetProps) {\n  useEffect(() => {\n    if (widgetID) {\n      console.debug(\n        'Note that widgetID is deprecated since version 1.1.0. Please use widgetId instead.'\n      );\n    }\n  }, [widgetID]);\n\n  useLoadPlatform(modern);\n\n  const finalWidgetId = widgetId ?? widgetID;\n  let effectiveClassName = `elfsight-app-${finalWidgetId}`;\n  if (className) {\n    effectiveClassName += ` ${className}`;\n  }\n\n  let effectiveLazy: string | undefined;\n  if (typeof lazy === 'boolean') {\n    effectiveLazy = lazy ? 'default' : undefined;\n  } else {\n    effectiveLazy = lazy;\n  }\n\n  return (\n    <div\n      className={effectiveClassName}\n      data-elfsight-app-lazy={effectiveLazy}\n      {...forwardedProps}\n    />\n  );\n});\n"],"names":["PLATFORM_URL","memo","_ref","widgetId","widgetID","lazy","_ref$modern","modern","className","forwardedProps","_objectWithoutPropertiesLoose","_excluded","useEffect","console","debug","window","document","querySelector","platfromScript","createElement","src","dataset","testid","useServiceCore","body","appendChild","useLoadPlatform","effectiveClassName","React","undefined"],"mappings":"oJAEMA,EAAe,gICkCSC,QAAK,SAAuBC,OACxDC,EAAQD,EAARC,SACAC,EAAQF,EAARE,SACAC,EAAIH,EAAJG,KAAIC,EAAAJ,EACJK,OAAAA,WAAMD,GAAQA,EACdE,EAASN,EAATM,UACGC,oIAAcC,CAAAR,EAAAS,GAEjBC,aAAU,WACJR,GACFS,QAAQC,MACN,wFAGH,CAACV,aD9C0BG,GAC9BK,aAAU,WAIR,KAFE,UAAWG,UACTC,SAASC,6BAA6BjB,QAC1C,CAGA,IAAMkB,EAAiBF,SAASG,cAAc,UAC9CD,EAAeE,IAAMpB,EACrBkB,EAAeG,QAAQC,OAAS,kBAC5Bf,IACFW,EAAeG,QAAQE,eAAiB,IAE1CP,SAASQ,KAAKC,YAAYP,MAGzB,IC+BHQ,CAAgBnB,GAEhB,IACIoB,mBADkBxB,MAAAA,EAAAA,EAAYC,GAalC,OAXII,IACFmB,OAA0BnB,GAW1BoB,qCACEpB,UAAWmB,2BARK,kBAATtB,EACOA,EAAO,eAAYwB,EAEnBxB,GAOVI"}