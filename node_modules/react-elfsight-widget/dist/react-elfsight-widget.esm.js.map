{"version":3,"file":"react-elfsight-widget.esm.js","sources":["../src/useLoadPlatform.ts","../src/ElfsightWidget.tsx"],"sourcesContent":["import { useEffect } from 'react';\n\nconst PLATFORM_URL = 'https://static.elfsight.com/platform/platform.js';\n\nexport function useLoadPlatform(modern: boolean) {\n  useEffect(() => {\n    const isPlatformLoaded =\n      'eapps' in window ||\n      !!document.querySelector(`script[src=\"${PLATFORM_URL}\"]`);\n    if (isPlatformLoaded) {\n      return;\n    }\n    const platfromScript = document.createElement('script');\n    platfromScript.src = PLATFORM_URL;\n    platfromScript.dataset.testid = 'platform-script';\n    if (modern) {\n      platfromScript.dataset.useServiceCore = '';\n    }\n    document.body.appendChild(platfromScript);\n    // platform cannot be loaded twice on the sampe page\n    /* eslint-disable-next-line react-hooks/exhaustive-deps */\n  }, []);\n}\n","import type { HTMLAttributes } from 'react';\nimport React, { memo, useEffect } from 'react';\nimport { useLoadPlatform } from './useLoadPlatform';\n\nexport type ElfsightWidgetProps =\n  | ModernElfsightWidgetProps\n  | LegacyElfsightWidgetProps;\n\nexport interface ModernElfsightWidgetProps extends BaseElfsightWidgetProps {\n  /**\n   * @deprecated since 1.1.0, please use widgetId instead\n   * */\n  widgetID?: never;\n  widgetId: string;\n}\n\nexport interface LegacyElfsightWidgetProps extends BaseElfsightWidgetProps {\n  /**\n   * @deprecated since 1.1.0, please use widgetId instead\n   * */\n  widgetID: string;\n  widgetId?: never;\n}\n\nexport interface BaseElfsightWidgetProps\n  extends HTMLAttributes<HTMLDivElement> {\n  lazy?: boolean | NamedLazyMode;\n  modern?: boolean;\n}\n\nexport type NamedLazyMode =\n  | `default`\n  | 'first-activity'\n  | 'in-viewport'\n  | 'disabled';\n\nexport const ElfsightWidget = memo(function ElfsightWidget({\n  widgetId,\n  widgetID,\n  lazy,\n  modern = false,\n  className,\n  ...forwardedProps\n}: ElfsightWidgetProps) {\n  useEffect(() => {\n    if (widgetID) {\n      console.debug(\n        'Note that widgetID is deprecated since version 1.1.0. Please use widgetId instead.'\n      );\n    }\n  }, [widgetID]);\n\n  useLoadPlatform(modern);\n\n  const finalWidgetId = widgetId ?? widgetID;\n  let effectiveClassName = `elfsight-app-${finalWidgetId}`;\n  if (className) {\n    effectiveClassName += ` ${className}`;\n  }\n\n  let effectiveLazy: string | undefined;\n  if (typeof lazy === 'boolean') {\n    effectiveLazy = lazy ? 'default' : undefined;\n  } else {\n    effectiveLazy = lazy;\n  }\n\n  return (\n    <div\n      className={effectiveClassName}\n      data-elfsight-app-lazy={effectiveLazy}\n      {...forwardedProps}\n    />\n  );\n});\n"],"names":["PLATFORM_URL","useLoadPlatform","modern","useEffect","isPlatformLoaded","window","document","querySelector","platfromScript","createElement","src","dataset","testid","useServiceCore","body","appendChild","ElfsightWidget","memo","_ref","widgetId","widgetID","lazy","_ref$modern","className","forwardedProps","_objectWithoutPropertiesLoose","_excluded","console","debug","finalWidgetId","effectiveClassName","effectiveLazy","undefined","React"],"mappings":";;;;;;;;;;;;;;;AAEA,IAAMA,YAAY,GAAG,kDAAkD;SAEvDC,eAAeA,CAACC,MAAe;EAC7CC,SAAS,CAAC;IACR,IAAMC,gBAAgB,GACpB,OAAO,IAAIC,MAAM,IACjB,CAAC,CAACC,QAAQ,CAACC,aAAa,mBAAgBP,YAAY,SAAK;IAC3D,IAAII,gBAAgB,EAAE;MACpB;;IAEF,IAAMI,cAAc,GAAGF,QAAQ,CAACG,aAAa,CAAC,QAAQ,CAAC;IACvDD,cAAc,CAACE,GAAG,GAAGV,YAAY;IACjCQ,cAAc,CAACG,OAAO,CAACC,MAAM,GAAG,iBAAiB;IACjD,IAAIV,MAAM,EAAE;MACVM,cAAc,CAACG,OAAO,CAACE,cAAc,GAAG,EAAE;;IAE5CP,QAAQ,CAACQ,IAAI,CAACC,WAAW,CAACP,cAAc,CAAC;;;GAG1C,EAAE,EAAE,CAAC;AACR;;;ACrBA,IAmCaQ,cAAc,gBAAGC,IAAI,CAAC,SAASD,cAAcA,CAAAE,IAAA;MACxDC,QAAQ,GAAAD,IAAA,CAARC,QAAQ;IACRC,QAAQ,GAAAF,IAAA,CAARE,QAAQ;IACRC,IAAI,GAAAH,IAAA,CAAJG,IAAI;IAAAC,WAAA,GAAAJ,IAAA,CACJhB,MAAM;IAANA,MAAM,GAAAoB,WAAA,cAAG,KAAK,GAAAA,WAAA;IACdC,SAAS,GAAAL,IAAA,CAATK,SAAS;IACNC,cAAc,GAAAC,6BAAA,CAAAP,IAAA,EAAAQ,SAAA;EAEjBvB,SAAS,CAAC;IACR,IAAIiB,QAAQ,EAAE;MACZO,OAAO,CAACC,KAAK,CACX,oFAAoF,CACrF;;GAEJ,EAAE,CAACR,QAAQ,CAAC,CAAC;EAEdnB,eAAe,CAACC,MAAM,CAAC;EAEvB,IAAM2B,aAAa,GAAGV,QAAQ,aAARA,QAAQ,cAARA,QAAQ,GAAIC,QAAQ;EAC1C,IAAIU,kBAAkB,qBAAmBD,aAAe;EACxD,IAAIN,SAAS,EAAE;IACbO,kBAAkB,UAAQP,SAAW;;EAGvC,IAAIQ,aAAiC;EACrC,IAAI,OAAOV,IAAI,KAAK,SAAS,EAAE;IAC7BU,aAAa,GAAGV,IAAI,GAAG,SAAS,GAAGW,SAAS;GAC7C,MAAM;IACLD,aAAa,GAAGV,IAAI;;EAGtB,OACEY;IACEV,SAAS,EAAEO,kBAAkB;8BACLC;KACpBP,cAAc,EAClB;AAEN,CAAC,CAAC;;;;"}